# JLAuthorizationManagerSwift

![Build Status](https://img.shields.io/badge/build-passing-brightgreen.svg)
[![Version](https://img.shields.io/cocoapods/v/JLAuthorizationManagerSwift.svg?style=flat)](https://cocoapods.org/pods/JLAuthorizationManagerSwift)
[![License](https://img.shields.io/cocoapods/l/JLAuthorizationManagerSwift.svg?style=flat)](https://cocoapods.org/pods/JLAuthorizationManagerSwift)
[![Platform](https://img.shields.io/cocoapods/p/JLAuthorizationManagerSwift.svg?style=flat)](https://cocoapods.org/pods/JLAuthorizationManagerSwift)

[ä¸­æ–‡æ–‡æ¡£](https://github.com/123sunxiaolin/JLAuthorizationManager-Swift/wiki/ä¸­æ–‡æ–‡æ¡£)

[Objective-C ç‰ˆæœ¬ è¯·æˆ³è¿™](https://github.com/123sunxiaolin/JLAuthorizationManager)

ðŸ”‘ **JLAuthorizationManagerSwift** is a **simple**, **lightWeight**, **easy-to-use**, **complete**, **thread-safety** permission lib for iOS  developers to use.


## Features
- [x] Full coverage, currently supports access to **Photos**, **Camera**, **CellularNetwork**, **Microphone**, **Calendar**, **Reminder**, **Notification**, **Location**, **AppleMusic**, **SpeechRecognizer**, **Siri**, **Bluetooth** etc.
- [x] Easy-to-use, unified interface and separated singe permission.Avoid submitting App Store rejected issues.
- [x] Async fetch authorized permission and callback always in main thread.
- [x] multiple ways to use and flexible use.

Getting Started
------------
### Prerequisites
- Apps using **JLAuthorizationManagerSwift** can target: iOS 8.0 or later.
- Xcode 8.0 or later required.

### Installation
- Via **Cocoapods**ï¼š
<br>1.Install[Cocoapods](https://guides.cocoapods.org/using/getting-started.html);
<br>2.Run `pod repo update` to make CocoaPods aware of the latest available **JLAuthorizationManagerSwift** versions.
<br>3.Due to **Podfile** 's target, add corresponding pod commands as followsï¼Œthen run `pod install`.In the end, use the .xcworkspace file generated by CocoaPods to work on your project. 

```
// pod 'JLAuthorizationManagerSwift/All' is equivatent to
pod 'JLAuthorizationManagerSwift' 
Or
pod 'JLAuthorizationManagerSwift/AuthorizationManager'
Or
pod 'JLAuthorizationManagerSwift/Camera'
Or
pod 'JLAuthorizationManagerSwift/Microphone'
...

```
- Via Manually
<br>1.firstï¼Œclone project from **https://github.com/123sunxiaolin/JLAuthorizationManager.git**;
<br>2.Then, find document path `JLAuthorizationManager/Classes`, and permission file you need.Need to pay attention to, must add **Base** folder into your project before use.

Tutorials
------------
####  Usage of **JLAuthorizationManager**ï¼š
- 1.Via `shared` singleton method to use.
- 2.Use uniform interfaceï¼š

```
// Geneeral
public func requestPermission(_ type: PermissionType,
                                  completion: @escaping PermissionCompletion)
                                 
 // Health Data
  public func requestHealthPermission(_ typesToShare: Set<HKSampleType>,
                                        typesToRead: Set<HKObjectType>,
                                        completion: @escaping PermissionCompletion)
                                 
```

### Usage of single permission - **xxxPermission**:

- 1. Every single permission class inherits from base class**BasePermisssion**,  implementing a unified interface protocol **Permission**:

```
public protocol Permission where Self: BasePermission {
    
    /// Permission type
    var type: PermissionType { get }
    
    /// Current authorized status
    func authorizedStatus() -> AuthorizedStatus
    
    /// Request current permission
    func requestPermission(_ completion: @escaping AuthorizedCompletion)
    
}

```

- Basic usageï¼ˆtake request **photos** permission as an exampleï¼‰:

```
let permission = PhotosPermission()
print("\(type.title) -> status:\(permission.authorizedStatus())")
permission.requestPermission { granted in
	print(granted ? "Authorized -> \(type.title)" : "unAuthorized -> \(type.title)")
}
```

- Use singleton method `shared` to call, when requesting **Location** and **Bluetooth** permission. Take requesting **Location** permission as an excample: 

```
let permission = LocationAlwaysPermission.shared
print("\(type.title) -> status:\(permission.authorizedStatus())")
permission.requestPermission { granted in
	print(granted ? "Authorized -> \(type.title)" : "unAuthorized -> \(type.title)")
}
```

- **Health Data** requestï¼š

```
let permission = HealthPermission(typesToShare, typesToRead: typesToRead)
print("\(type.title) -> status:\(permission.authorizedStatus())")
permission.requestPermission { granted in
	print(granted ? "Authorized -> \(type.title)" : "unAuthorized -> \(type.title)")
}
```

**For more infomation about useags, please refer to DEMO**.

Tips and Tricks
---------------

- **Don't** forget add authorization Description in `info.plist`.
- if you want to use `HealthKit` or `Siri`,please open switch on `Capabilities`,then system create `xx..entitlements` file automatically.
- if project is not submited to App store, you can use the unified permission manager file `JLAuthorizationManagerSwift`; if you need to submit project to the App Store, you need to add the corresponding permission request file according to the business needs, otherwise, the App Store will be rejected due to the addition of useless permissions.

Update Note
---------------
- **v1.0.4** (2019-2-12):Fix bugs.
- **v1.0.3** (2019-1-18):Update project structure.
- **v1.0.0** (2019-1-17):Divide all permissions into single permission file to avoid fail to commit **AppStore** and provide various ways to request..

Issues and Improvements
----

- If you find some bugs or things to improve when use the lib, you can open a **issue** directly. If you have a better implementation, welcome to **Pull Request**.


Discussion and Learning
----
- iOS QQ groupï¼š**709148214**
- Official Account(Wechat)ï¼šçŒ¿è§†è§’(**iOSDevSkills**)
- Wechatï¼š**401788217**
- [Jianshu](https://www.jianshu.com/u/ef991f6d241c)

## Author

Jacklin, 401788217@qq.com

## License

JLAuthorizationManagerSwift is available under the MIT license. See the [LICENSE](https://github.com/123sunxiaolin/JLAuthorizationManager-Swift/blob/master/LICENSE) file for more info.
